<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<script type="text/javascript">
var str = 'c2VydmljZSUzZG1vYmlsZS5zZWN1cml0eXBheS5wYXklMjZwYXJ0bmVyJTNkMjA4ODkxMTIwMTc0MDI3NCUyNnNpZ25fdHlwZSUzZFJTQSUyNnNpZ24lM2RQcDBmJTI1MkIzdnJucjhkVExnaGMyMjVHJTI1MkJnZ3dvWEoxc01BUnNGTm9MQWJTRmxNRGIzZWZqbUE4eXFWMTAwb1U3ZzhDOG1zaFYzMmtRdG1jaVZrSVFkTnZmUFVwMXRxVDhReks0Sjk1T0puWml4QVRYS1FIY3dUUjlPOXRNckQzQTM3RklnR3k2NUN2U0NJMkZNSVRRVWZhRTUlMjUyRkIxTHBYck52QnptSlR2ZTVkQ2slMjUzRCUyNm5vdGlmeV91cmwlM2RodHRwJTNhJTJmJTJmcGF5djMueWFuZ2tlZHVvLmNvbSUyZm5vdGlmeSUyZjYlMjZvdXRfdHJhZGVfbm8lM2RYUDAwMTkwNzE3MTAyMDA4MzAyMDI3MjgwMDQzNDUlMjZzdWJqZWN0JTNkJWU4JWFlJWEyJWU1JThkJTk1JWU3JWJjJTk2JWU1JThmJWI3MTkwNzE3LTIwMjQ4NTkyNDg1MDMzNCUyNnBheW1lbnRfdHlwZSUzZDElMjZzZWxsZXJfaWQlM2RwZGR6aGlmdWJhbyU0MHlpcmFuLmNvbSUyNnRvdGFsX2ZlZSUzZDEwMCUyNmJvZHklM2QlZTglYWUlYTIlZTUlOGQlOTUlZTclYmMlOTYlZTUlOGYlYjcxOTA3MTctMjAyNDg1OTI0ODUwMzM0JTI2Z29vZHNfdHlwZSUzZDElMjZfaW5wdXRfY2hhcnNldCUzZHV0Zi04';

var Base64 = {
	_keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
	encode: function(e) {
		var t = "";
		var n, r, i, s, o, u, a;
		var f = 0;
		e = Base64._utf8_encode(e);
		while (f < e.length) {
			n = e.charCodeAt(f++);
			r = e.charCodeAt(f++);
			i = e.charCodeAt(f++);
			s = n >> 2;
			o = (n & 3) << 4 | r >> 4;
			u = (r & 15) << 2 | i >> 6;
			a = i & 63;
			if (isNaN(r)) {
				u = a = 64
			} else if (isNaN(i)) {
				a = 64
			}
			t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
		}
		return t
	},
	decode: function(e) {
		var t = "";
		var n, r, i;
		var s, o, u, a;
		var f = 0;
		e = e.replace(/[^A-Za-z0-9+/=]/g, "");
		while (f < e.length) {
			s = this._keyStr.indexOf(e.charAt(f++));
			o = this._keyStr.indexOf(e.charAt(f++));
			u = this._keyStr.indexOf(e.charAt(f++));
			a = this._keyStr.indexOf(e.charAt(f++));
			n = s << 2 | o >> 4;
			r = (o & 15) << 4 | u >> 2;
			i = (u & 3) << 6 | a;
			t = t + String.fromCharCode(n);
			if (u != 64) {
				t = t + String.fromCharCode(r)
			}
			if (a != 64) {
				t = t + String.fromCharCode(i)
			}
		}
		t = Base64._utf8_decode(t);
		return t
	},
	_utf8_encode: function(e) {
		e = e.replace(/rn/g, "n");
		var t = "";
		for (var n = 0; n < e.length; n++) {
			var r = e.charCodeAt(n);
			if (r < 128) {
				t += String.fromCharCode(r)
			} else if (r > 127 && r < 2048) {
				t += String.fromCharCode(r >> 6 | 192);
				t += String.fromCharCode(r & 63 | 128)
			} else {
				t += String.fromCharCode(r >> 12 | 224);
				t += String.fromCharCode(r >> 6 & 63 | 128);
				t += String.fromCharCode(r & 63 | 128)
			}
		}
		return t
	},
	_utf8_decode: function(e) {
		var t = "";
		var n = 0;
		var r = c1 = c2 = 0;
		while (n < e.length) {
			r = e.charCodeAt(n);
			if (r < 128) {
				t += String.fromCharCode(r);
				n++
			} else if (r > 191 && r < 224) {
				c2 = e.charCodeAt(n + 1);
				t += String.fromCharCode((r & 31) << 6 | c2 & 63);
				n += 2
			} else {
				c2 = e.charCodeAt(n + 1);
				c3 = e.charCodeAt(n + 2);
				t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
				n += 3
			}
		}
		return t
	}
}

function getQueryString(name) {
	var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
	var r = window.location.search.substr(1).match(reg);
	if (r != null) {
	return unescape(r[2]);
	}
	return null;
}

var orderStr = decodeURIComponent(Base64.decode(getQueryString("t")));

function ready(callback) {
	// 如果jsbridge已经注入则直接调用
	if (window.AlipayJSBridge) {
		callback && callback();
	} else {
		// 如果没有注入则监听注入的事件
		document.addEventListener('AlipayJSBridgeReady', callback, false);
	}
};
ready(function () {
	AlipayJSBridge.call("tradePay", {
		orderStr: orderStr  //这里的orderStr就是这个获取到的t参数
	}, function (result) {
		if (result.resultCode=="9000") {
			alert("支付成功！");
		}
		else {
			alert("支付失败！");
		}
		//alert(JSON.stringify(result));
	});
});

</script>
</body>
</html>
